<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tomoca IT Support</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>

<div class="page-container">

    <!-- LEFT NAVIGATION -->
    <nav class="side-nav">
        <a href="index.html">Submit Ticket</a>
        <a href="track.html">Track Ticket</a>
        <a href="history.html">History</a>
        <a href="faq.html">FAQ</a>
        <a href="contact-it.html">Contact IT</a>
        <a href="dashboard.html">Admin Dashboard</a>
        <a href="tickets.html">All Tickets</a>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <div class="ticket-card">

            <div class="left-section">
                <h2>Tomoca Coffee<br><span>IT Support Desk</span></h2>
                <p>Submit your issue and our IT team will respond quickly.  
                Include the ticket ID in follow-ups.</p>

                <p class="tip">Tip: Screenshots will be added soon.</p>
            </div>

            <div class="right-section">
                <h3>Submit a Support Ticket</h3>

                <form id="ticketForm">

                    <label>Your Name *</label>
                    <input type="text" id="name" required />

                    <label>Department *</label>
                    <select id="department" required>
                        <option value="">Select department</option>
                        <option>IT</option>
                        <option>Finance</option>
                        <option>HR</option>
                        <option>Operations</option>
                        <option>Sales</option>
                        <option>Logistics</option>
                    </select>

                    <label>Urgency *</label>
                    <select id="urgency" required>
                        <option value="">Select urgency</option>
                        <option>Low</option>
                        <option>Medium</option>
                        <option>High</option>
                    </select>

                    <label>Issue Description *</label>
                    <textarea id="issue" rows="5" required></textarea>

                    <button type="submit" class="submit-btn">Submit Ticket</button>
                </form>

                <p class="version">Tomoca Coffee IT • Support System v1.0</p>
            </div>

        </div>
    </div>
</div>

<script>
document.getElementById("ticketForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = {
        name: document.getElementById("name").value,
        department: document.getElementById("department").value,
        urgency: document.getElementById("urgency").value,
        issue: document.getElementById("issue").value
    };

    try {
        const res = await fetch("https://YOUR-BACKEND-URL/submit-ticket", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
        });

        const result = await res.json();

        if (result.success) {
            window.location.href = "success.html?ticket=" + result.ticketId;
        } else {
            alert("❌ Error submitting ticket. Please try again.");
        }

    } catch (err) {
        console.error(err);
        alert("❌ Server unreachable. Contact IT.");
    }
});
</script>

</body>
</html>
